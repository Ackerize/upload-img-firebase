[{"C:\\Users\\Mi-PC\\Desktop\\my-upload\\src\\index.js":"1","C:\\Users\\Mi-PC\\Desktop\\my-upload\\src\\App.js":"2","C:\\Users\\Mi-PC\\Desktop\\my-upload\\src\\reportWebVitals.js":"3","C:\\Users\\Mi-PC\\Desktop\\my-upload\\src\\components\\Upload.js":"4","C:\\Users\\Mi-PC\\Desktop\\my-upload\\src\\firebase\\firebase.js":"5","C:\\Users\\Mi-PC\\Desktop\\my-upload\\src\\components\\MyUploader.js":"6"},{"size":177,"mtime":1610502592312,"results":"7","hashOfConfig":"8"},{"size":165,"mtime":1610502610907,"results":"9","hashOfConfig":"8"},{"size":362,"mtime":499162500000,"results":"10","hashOfConfig":"8"},{"size":2655,"mtime":1611079016396,"results":"11","hashOfConfig":"8"},{"size":558,"mtime":1610500726664,"results":"12","hashOfConfig":"8"},{"size":480,"mtime":1610506543386,"results":"13","hashOfConfig":"8"},{"filePath":"14","messages":"15","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},"127y0gk",{"filePath":"17","messages":"18","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"19","usedDeprecatedRules":"16"},{"filePath":"20","messages":"21","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"22","messages":"23","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"24","usedDeprecatedRules":"16"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"27"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},"C:\\Users\\Mi-PC\\Desktop\\my-upload\\src\\index.js",[],["31","32"],"C:\\Users\\Mi-PC\\Desktop\\my-upload\\src\\App.js",["33"],"import logo from './logo.svg';\nimport './App.css';\nimport Upload from './components/Upload';\n\nfunction App() {\n  return (\n    <Upload />\n  );\n}\n\nexport default App;\n","C:\\Users\\Mi-PC\\Desktop\\my-upload\\src\\reportWebVitals.js",[],"C:\\Users\\Mi-PC\\Desktop\\my-upload\\src\\components\\Upload.js",["34"],"import React, { useEffect, useState } from \"react\";\r\nimport { storage } from \"../firebase/firebase\";\r\nimport \"./style.css\";\r\nimport ProgressBar from \"@ramonak/react-progress-bar\";\r\n\r\nconst Upload = () => {\r\n  const [image, setImage] = useState({ name: \"No Image\" });\r\n  const [url, setUrl] = useState(\"\");\r\n  const [progress, setProgress] = useState(0);\r\n  const [ready, setReady] = useState(false);\r\n  const [lastImage, setLastImage] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (image.name !== \"No Image\") {\r\n      if (lastImage !== \"\") {\r\n        storage\r\n          .ref(\"/\")\r\n          .child(lastImage)\r\n          .delete()\r\n          .then(() => console.log(\"Done!\"))\r\n          .catch(() => console.log(\"ERROR\"));\r\n      }\r\n      handleUpload();\r\n    }\r\n  }, [image]);\r\n\r\n  const handleUpload = () => {\r\n    const uploadTask = storage.ref(`/${image.name}`).put(image);\r\n    uploadTask.on(\r\n      \"state_changed\",\r\n      (snapshot) => {\r\n        const progress = Math.round(\r\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100\r\n        );\r\n        setProgress(progress);\r\n      },\r\n      (error) => {\r\n        console.log(error);\r\n      },\r\n      () => {\r\n        storage\r\n          .ref(\"/\")\r\n          .child(image.name)\r\n          .getDownloadURL()\r\n          .then((url) => {\r\n            setUrl(url);\r\n          });\r\n        setLastImage(image.name);\r\n        setReady(true);\r\n      }\r\n    );\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    if (e.target.files[0]) {\r\n      setImage(e.target.files[0]);\r\n    }\r\n  };\r\n\r\n  console.log(\"image: \", image);\r\n\r\n  return (\r\n    <div>\r\n      <br />\r\n      {ready ? (\r\n        <>\r\n          <input\r\n            type=\"file\"\r\n            style={{ display: \"none\" }}\r\n            id=\"img\"\r\n            onChange={handleChange}\r\n          />\r\n          <button\r\n            className=\"img-upload\"\r\n            style={{\r\n              backgroundImage: `url(${url})`,\r\n              imageResolution: \"from-image\",\r\n            }}\r\n          >\r\n            <label htmlFor=\"img\" className=\"img-label\">\r\n              +\r\n            </label>\r\n          </button>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <input\r\n            type=\"file\"\r\n            style={{ display: \"none\" }}\r\n            id=\"img\"\r\n            onChange={handleChange}\r\n          />\r\n          <button className=\"img-add\">\r\n            <label htmlFor=\"img\" className=\"img-label\">\r\n              +\r\n            </label>\r\n          </button>\r\n        </>\r\n      )}\r\n      <ProgressBar completed={progress} width=\"21%\" bgcolor=\"#21AB91\" margin=\"10px\" labelAlignment=\"center\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Upload;\r\n","C:\\Users\\Mi-PC\\Desktop\\my-upload\\src\\firebase\\firebase.js",[],["35","36"],"C:\\Users\\Mi-PC\\Desktop\\my-upload\\src\\components\\MyUploader.js",[],["37","38"],{"ruleId":"39","replacedBy":"40"},{"ruleId":"41","replacedBy":"42"},{"ruleId":"43","severity":1,"message":"44","line":1,"column":8,"nodeType":"45","messageId":"46","endLine":1,"endColumn":12},{"ruleId":"47","severity":1,"message":"48","line":25,"column":6,"nodeType":"49","endLine":25,"endColumn":13,"suggestions":"50"},{"ruleId":"39","replacedBy":"51"},{"ruleId":"41","replacedBy":"52"},{"ruleId":"39","replacedBy":"53"},{"ruleId":"41","replacedBy":"54"},"no-native-reassign",["55"],"no-negated-in-lhs",["56"],"no-unused-vars","'logo' is defined but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'handleUpload' and 'lastImage'. Either include them or remove the dependency array.","ArrayExpression",["57"],["55"],["56"],["55"],["56"],"no-global-assign","no-unsafe-negation",{"desc":"58","fix":"59"},"Update the dependencies array to be: [handleUpload, image, lastImage]",{"range":"60","text":"61"},[768,775],"[handleUpload, image, lastImage]"]